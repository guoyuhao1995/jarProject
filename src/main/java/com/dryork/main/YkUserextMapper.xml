<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dryork.main.YkUserextMapper" >
  <resultMap id="BaseResultMap" type="com.dryork.main.YkUserext" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="parent_id" property="parentId" jdbcType="BIGINT" />
    <result column="is_group" property="isGroup" jdbcType="INTEGER" />
    <result column="wxuid" property="wxuid" jdbcType="BIGINT" />
    <result column="cookie" property="cookie" jdbcType="VARCHAR" />
    <result column="ykuser_name" property="ykuserName" jdbcType="VARCHAR" />
    <result column="user_sex" property="userSex" jdbcType="VARCHAR" />
    <result column="birthday" property="birthday" jdbcType="TIMESTAMP" />
    <result column="mobile" property="mobile" jdbcType="VARCHAR" />
    <result column="create_date" property="createDate" jdbcType="TIMESTAMP" />
    <result column="lastappoint_date" property="lastappointDate" jdbcType="TIMESTAMP" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="level" property="level" jdbcType="INTEGER" />
    <result column="defaut_did" property="defautDid" jdbcType="BIGINT" />
    <result column="pub_id" property="pubId" jdbcType="BIGINT" />
    <result column="patFrom" property="patFrom" jdbcType="INTEGER"></result>
    <result column="age" property="age" jdbcType="INTEGER"></result>
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    id, parent_id, is_group, wxuid, cookie, ykuser_name, user_sex, birthday, mobile, create_date, lastappoint_date, 
    remark, level, defaut_did , pub_id , patFrom , age
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    select 
    <include refid="Base_Column_List" />
    from yk_userext
    where id = #{id,jdbcType=BIGINT}
  </select>
  <select id="selectByPrimaryWxuid" resultMap="BaseResultMap" parameterType="java.lang.Long" >
 	select 
    <include refid="Base_Column_List" />
    from yk_userext
    where wxuid = #{wxuid,jdbcType=BIGINT} limit 1
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Long" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    delete from yk_userext
    where id = #{id,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.dryork.main.YkUserext" useGeneratedKeys="true" keyProperty="id">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    insert into yk_userext (id, parent_id, is_group, wxuid, cookie, 
      ykuser_name, user_sex, birthday, 
      mobile, create_date, lastappoint_date, 
      remark, level, defaut_did , pub_id , patFrom , age
      )
    values (#{id,jdbcType=BIGINT}, #{parentId,jdbcType=BIGINT}, #{isGroup,jdbcType=INTEGER}, #{wxuid,jdbcType=BIGINT}, #{cookie,jdbcType=VARCHAR}, 
      #{ykuserName,jdbcType=VARCHAR}, #{userSex,jdbcType=VARCHAR}, #{birthday,jdbcType=TIMESTAMP}, 
      #{mobile,jdbcType=VARCHAR}, #{createDate,jdbcType=TIMESTAMP}, #{lastappointDate,jdbcType=TIMESTAMP}, 
      #{remark,jdbcType=VARCHAR}, #{level,jdbcType=INTEGER}, #{defautDid,jdbcType=BIGINT},#{pubId,jdbcType=BIGINT},#{patFrom,jdbcType=INTEGER},
      #{age,jdbcType=INTEGER}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.dryork.main.YkUserext" useGeneratedKeys="true" keyProperty="id">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    insert into yk_userext
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        id,
      </if>
      <if test="parentId != null" >
        parent_id,
      </if>
      <if test="isGroup != null" >
        is_group,
      </if>
      <if test="wxuid != null" >
        wxuid,
      </if>
      <if test="cookie != null" >
        cookie,
      </if>
      <if test="ykuserName != null" >
        ykuser_name,
      </if>
      <if test="userSex != null" >
        user_sex,
      </if>
      <if test="birthday != null" >
        birthday,
      </if>
      <if test="mobile != null" >
        mobile,
      </if>
      <if test="createDate != null" >
        create_date,
      </if>
      <if test="lastappointDate != null" >
        lastappoint_date,
      </if>
      <if test="remark != null" >
        remark,
      </if>
      <if test="level != null" >
        level,
      </if>
      <if test="defautDid != null" >
        defaut_did,
      </if>
      <if test="pubId != null" >
        pub_id,
      </if>
      <if test="patFrom != null">
      	patFrom,
      </if>
      <if test="age != null">
      	age,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=BIGINT},
      </if>
      <if test="parentId != null" >
        #{parentId,jdbcType=BIGINT},
      </if>
      <if test="isGroup != null" >
        #{isGroup,jdbcType=INTEGER},
      </if>
      <if test="wxuid != null" >
        #{wxuid,jdbcType=BIGINT},
      </if>
      <if test="cookie != null" >
        #{cookie,jdbcType=VARCHAR},
      </if>
      <if test="ykuserName != null" >
        #{ykuserName,jdbcType=VARCHAR},
      </if>
      <if test="userSex != null" >
        #{userSex,jdbcType=VARCHAR},
      </if>
      <if test="birthday != null" >
        #{birthday,jdbcType=TIMESTAMP},
      </if>
      <if test="mobile != null" >
        #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastappointDate != null" >
        #{lastappointDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="level != null" >
        #{level,jdbcType=INTEGER},
      </if>
      <if test="defautDid != null" >
        #{defautDid,jdbcType=BIGINT},
      </if>
      <if test="pubId != null" >
        #{pubId,jdbcType=BIGINT},
      </if>
      <if test="patFrom != null">
      	#{patFrom,jdbcType=INTEGER},
      </if>
      <if test="age != null">
      	#{age,jdbcType=INTEGER},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.dryork.main.YkUserext" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    update yk_userext
    <set >
      <if test="parentId != null" >
        parent_id = #{parentId,jdbcType=BIGINT},
      </if>
      <if test="isGroup != null" >
        is_group = #{isGroup,jdbcType=INTEGER},
      </if>
      <if test="wxuid != null" >
        wxuid = #{wxuid,jdbcType=BIGINT},
      </if>
      <if test="cookie != null" >
        cookie = #{cookie,jdbcType=VARCHAR},
      </if>
      <if test="ykuserName != null" >
        ykuser_name = #{ykuserName,jdbcType=VARCHAR},
      </if>
      <if test="userSex != null" >
        user_sex = #{userSex,jdbcType=VARCHAR},
      </if>
      <if test="birthday != null" >
        birthday = #{birthday,jdbcType=TIMESTAMP},
      </if>
      <if test="mobile != null" >
        mobile = #{mobile,jdbcType=VARCHAR},
      </if>
      <if test="createDate != null" >
        create_date = #{createDate,jdbcType=TIMESTAMP},
      </if>
      <if test="lastappointDate != null" >
        lastappoint_date = #{lastappointDate,jdbcType=TIMESTAMP},
      </if>
      <if test="remark != null" >
        remark = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="level != null" >
        level = #{level,jdbcType=INTEGER},
      </if>
      <if test="defautDid != null" >
        defaut_did = #{defautDid,jdbcType=BIGINT},
      </if>
      <if test="pubId != null" >
        pub_id = #{pubId,jdbcType=BIGINT},
      </if>
      <if test="patFrom != null">
      	patFrom = #{patFrom,jdbcType=INTEGER},
      </if>
      <if test="age != null">
      	age = #{age,jdbcType=INTEGER},
      </if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.dryork.main.YkUserext" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Fri Feb 05 09:23:07 CST 2016.
    -->
    update yk_userext
    <set> 
      <if test="wxuid != null">wxuid = #{wxuid,jdbcType=BIGINT},</if>
      <if test="parentId != null">parent_id = #{parentId,jdbcType=BIGINT},</if>
      <if test="isGroup != null">is_group = #{isGroup,jdbcType=INTEGER},</if>
      <if test="cookie != null">cookie = #{cookie,jdbcType=VARCHAR},</if>
      <if test="ykuserName != null">ykuser_name = #{ykuserName,jdbcType=VARCHAR},</if>
      <if test="userSex != null">user_sex = #{userSex,jdbcType=VARCHAR},</if>
      <if test="birthday != null">birthday = #{birthday,jdbcType=TIMESTAMP},</if>
      <if test="mobile != null">mobile = #{mobile,jdbcType=VARCHAR},</if>
      <if test="createDate != null">create_date = #{createDate,jdbcType=TIMESTAMP},</if>
      <if test="lastappointDate != null">lastappoint_date = #{lastappointDate,jdbcType=TIMESTAMP},</if>
      <if test="remark != null">remark = #{remark,jdbcType=VARCHAR},</if>
      <if test="level != null">level = #{level,jdbcType=INTEGER},</if>
      <if test="defautDid != null">defaut_did = #{defautDid,jdbcType=BIGINT},</if>
      <if test="pubId != null">pub_id = #{pubId,jdbcType=BIGINT},</if>
      <if test="patFrom != null">patFrom = #{patFrom,jdbcType=INTEGER},</if>
      <if test="age != null">age = #{age,jdbcType=INTEGER},</if>
    </set>
    where id = #{id,jdbcType=BIGINT}
  </update>
	<!--
	addtional:
		insert add tag:  useGeneratedKeys="true" keyProperty="id"
	then
		add follows:
	-->
	<sql id="Where_Clause" >
		<where>
			<if test="id != null" >
			  and id = #{id,jdbcType=BIGINT}
			</if>
			<if test="wxuid != null" >
			  and wxuid = #{wxuid,jdbcType=BIGINT}
			</if>
			<if test="parentId != null" >
			  and parent_id = #{parentId,jdbcType=BIGINT}
			</if>
			<if test="isGroup != null" >
			  and is_group = #{isGroup,jdbcType=BIGINT}
			</if>
			<if test="cookie != null" >
			  and cookie = #{cookie,jdbcType=VARCHAR}
			</if>
			<if test="ykuserName != null" >
			  and ykuser_name = #{ykuserName,jdbcType=VARCHAR}
			</if>
			<if test="userSex != null" >
			  and user_sex = #{userSex,jdbcType=VARCHAR}
			</if>
			<if test="birthday != null" >
			  and birthday = #{birthday,jdbcType=TIMESTAMP}
			</if>
			<if test="mobile != null" >
			  and mobile = #{mobile,jdbcType=VARCHAR}
			</if>
			<if test="createDate != null" >
			  and create_date = #{createDate,jdbcType=TIMESTAMP}
			</if>
			<if test="lastappointDate != null" >
			  and lastappoint_date = #{lastappointDate,jdbcType=TIMESTAMP}
			</if>
			<if test="remark != null" >
			  and remark = #{remark,jdbcType=VARCHAR}
			</if>
			<if test="level != null" >
			  and level = #{level,jdbcType=INTEGER}
			</if>
			<if test="defautDid != null" >
			  and defaut_did = #{defautDid,jdbcType=BIGINT}
			</if>
			<if test="pubId != null" >
			  and pub_id = #{pubId,jdbcType=BIGINT}
			</if>
			<if test="patFrom != null">
			  and patFrom = #{patFrom,jdbcType=INTEGER}
			</if>
			<if test="age != null">
				and age = #{age,jdbcType=INTEGER}
			</if>
			<if test="parentId != null">
				and parent_id = #{parentId,jdbcType=INTEGER}
			</if>
			<if test="sqlStr !=null">
			  ${sqlStr}
			</if>
		</where>
	</sql>
	
	<sql id="OrderBy_Clause">
		<if test="sqlSort != null" >
		  order by ${sqlSort}
		</if>
	</sql>
	
	<sql id="Limit_Clause">
		<if test="limitStart != null and limitCount != null" >
		  limit ${limitStart}, ${limitCount}
		</if>
	</sql>
	
	<select id="selectOne" resultMap="BaseResultMap" parameterType="com.dryork.main.YkUserext">
		select <include refid="Base_Column_List" /> from yk_userext <include refid="Where_Clause" />
	</select>
	  
	<select id="selectList" resultMap="BaseResultMap" parameterType="com.dryork.main.YkUserext">
		select <include refid="Base_Column_List" /> from yk_userext <include refid="Where_Clause" /> <include refid="OrderBy_Clause" />  <include refid="Limit_Clause" /> 
	</select>
	
	<select id="selectCount" resultType="java.lang.Integer" parameterType="com.dryork.main.YkUserext">
		select count(id) from yk_userext <include refid="Where_Clause" />
	</select>
	
	<select id="selectFamlyCount" resultType="java.lang.Integer" parameterType="com.dryork.main.YkUserext">
		select count(id) from yk_userext <include refid="Where_Clause" />
	</select>
	
	<select id="selectVipCount" resultType="java.lang.Integer" parameterType="com.dryork.main.YkUserext">
		SELECT COUNT(b.id) FROM yk_userext a, yk_user_card b WHERE a.id = b.user_id AND a.id = #{id,jdbcType=BIGINT} and b.`doc_id` = #{defautDid,jdbcType=BIGINT} and b.status = 1
	</select>
	
	<delete id="deleteSelective" parameterType="com.dryork.main.YkUserext" >
		delete from yk_userext <include refid="Where_Clause" />
	</delete>
	
	<select id="checkPatient" resultMap="BaseResultMap" parameterType="com.dryork.main.YkUserext">
	select u.* from yk_userext u where u.mobile = #{mobile} and u.id in (select m.user_id from yk_patient_dentist_mapping m where m.dentist_id =  #{defautDid});
	</select>
	
	<select id="checkPatientByEdit" resultMap="BaseResultMap" parameterType="com.dryork.main.YkUserext">
	select u.* from yk_userext u where u.mobile = #{mobile} and u.id != #{id};
	</select>
	
	<select id="selectNameById" resultType="java.lang.String" parameterType="java.lang.Long">
		select 
    	ykuser_name
    from yk_userext
     where id = #{id,jdbcType=BIGINT}
	</select>
	<!--
	follows is custom sql:
	-->

</mapper>